# 크리스마스 프로모션 🎄

## 출력 결과 예시
```text
안녕하세요! 우테코 식당 12월 이벤트 플래너입니다.
12월 중 식당 예상 방문 날짜는 언제인가요? (숫자만 입력해 주세요!)
25
주문하실 메뉴를 메뉴와 개수를 알려 주세요. (e.g. 해산물파스타-2,레드와인-1,초코케이크-1)
티본스테이크-2,초코케이크-2,레드와인-1

~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~*~
12월 25일에 우테코 식당에서 받을 이벤트 혜택 미리 보기!

<주문 메뉴>
티본스테이크 2개
초코케이크 2개
레드와인 1개

<할인 전 총주문 금액>
200,000원

<증정 메뉴>
샴페인 1개

<혜택 내역>
크리스마스 디데이 할인: -3,400원
평일 할인: -4,046원
특별 할인: -1,000원
증정 이벤트: -25,000원

<총혜택 금액>
-33,446원

<할인 후 예상 결제 금액>
191,554원

<12월 이벤트 배지>
산타

*˚ *˚ ˛★Event will be continued ★*•*˛  。
 。。* ˚ *˚  ★in January 2024!★ 。˛ ˚ ˚˛
  。  • * ˚*˚ ˛ _Π_____*。˚ ˛˛  °  •˛•*
  ˛*˚ ˛˛  •˛•*/_______/~＼。˚  ˚* ˚ • ˛ *
˚ ˛。 • ˚ ˚ •˛｜ 田 田  ｜ 0｜ • ° •˛ ˚ ˛˚˛
 ╭ ◜◝ ͡ ◜◝ ͡ ◜◝ ͡ ◜◝ ͡ ◜◝ ͡ ◜◝ ͡ ◜◝ ͡ ◜◝ ͡ ◜◝╮
```

## 체크리스트

### 요구사항

- [x] 시작할 시 환영 문구를 출력한다.
- [x] 방문 날짜 입력 받는다.
    - [x] `12월 중 식당 예상 방문 날짜는 언제인가요? (숫자만 입력해 주세요!)` 라는 문구를 출력한다.
    - [x] 입력값이 숫자가 아닌 경우 예외를 출력하고, 다시 입력받는다.
    - [x] 방문할 날짜는 1 이상 31 이하의 숫자여야 한다.
        - [x] 아닐 경우, `[ERROR] 유효하지 않은 날짜입니다. 다시 입력해 주세요.`라는 에러 메시지를 출력하고 다시 입력받는다.
- [x] 주문할 메뉴와 개수를 입력 받는다.
    - [x] `주문하실 메뉴와 개수를 알려 주세요. (e.g. 해산물파스타-2,레드와인-1,초코케이크-1)`라는 문구를 출력한다.
    - [x] 메뉴판에 있는 메뉴만 입력 가능하다.
        - [x] 아닐 경우, `[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요.`라는 에러 메시지를 출력하고 다시 입력받는다.
    - [x] 메뉴의 개수는 1 이상의 숫자만 입력되어야 한다.
        - [x] 아닐 경우, `[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요.`라는 에러 메시지를 출력하고 다시 입력받는다.
    - [x] 입력값이 빈 값인 경우 예외를 출력하고, 다시 입력받는다.
    - [x] 형식(이름-개수,이름-개수)에 맞아야 한다.
        - [x] 아닐 경우, `[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요.`라는 에러 메시지를 출력하고 다시 입력받는다.
        - [x] 중복 메뉴를 입력(e.g. 시저샐러드-1,시저샐러드-1)하면 안 된다.
            - [x] 아닐 경우, `[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요.`라는 에러 메시지를 출력하고 다시 입력받는다.
        - [x] 메뉴는 한 번에 최대 20개까지만 주문할 수 있다. (e.g. 시저샐러드-1, 티본스테이크-1, 크리스마스파스타-1, 제로콜라-3, 아이스크림-1의 총개수는 7개)
- [x] 이벤트 혜택 미리 보기 문구를 출력한다.
- [x] 주문 메뉴를 출력한다.
    - [x] 형태는 '{메뉴명} {개수}개' 로 한다.
    - [x] 주문 메뉴의 출력 순서는 자유롭게 출력한다.
- [x] 할인 전 총주문 금액을 출력한다.
    - [x] 형태는 '{금액}원' 으로 한다.
    - [x] 금액에는 1000원 단위로 콤마를 표현한다.
- [x] 증정 메뉴를 출력한다.
    - [x] 형태는 '{메뉴명} {개수}개' 로 한다.
    - [x] 증정 이벤트에 해당하지 않는 경우, 증정 메뉴 "없음"을 출력한다.
- [x] 적용되는 혜택을 계산한다.
    - [x] 단, 혜택은 총 주문 금액 10,000원 이상일 때 적용된다.
    - [x] 단, 음료만 주문 시 주문할 수 없다.
    - [x] 크리스마스 디데이 할인
        - [x] 이벤트 기간: 2023.12.1 ~ 2023.12.25
        - [x] 1,000원으로 시작하여 크리스마스가 다가올수록 날마다 할인 금액이 100원씩 증가
        - [x] 총주문 금액에서 해당 금액만큼 할인 (e.g. 시작일인 12월 1일에 1,000원, 2일에 1,100원, ..., 25일엔 3,400원 할인)
    - [x] 평일 할인(일요일~목요일): 평일에는 디저트 메뉴를 메뉴 1개당 2,023원 할인
    - [x] 주말 할인(금요일, 토요일): 주말에는 메인 메뉴를 메뉴 1개당 2,023원 할인
    - [x] 특별 할인: 이벤트 달력에 별이 있으면 총주문 금액에서 1,000원 할인
    - [x] 증정 이벤트: 할인 전 총주문 금액이 12만 원 이상일 때, 샴페인 1개 증정
    - [x] 이벤트 기간: '크리스마스 디데이 할인'을 제외한 다른 이벤트는 2023.12.1 ~ 2023.12.31 동안 적용
- [x] 혜택 내역을 출력한다.
    - [x] 고객에게 적용된 이벤트 내역만 보여준다.
    - [x] 혜택 내역에 여러 개의 이벤트가 적용된 경우, 출력 순서는 자유롭게 출력해주세요.
    - [x] 형태는 '{혜택명}: -{혜택금액}원' 로 한다.
    - [x] 혜택금액에는 1000원 단위로 콤마를 표현한다.
    - [x] 적용된 이벤트가 하나도 없다면 혜택 내역 "없음"을 출력한다.
- [x] 총혜택 금액을 출력한다.
    - [x] '총혜택 금액 = 할인 금액의 합계 + 증정 메뉴의 가격' 으로 계산한다.
    - [x] 형태는 '-{금액}원' 으로 한다.
    - [x] 금액에는 1000원 단위로 콤마를 표현한다.
- [x] 할인 후 예상 결제 금액을 출력한다.
    - [x] '할인 후 예상 결제 금액 = 할인 전 총주문 금액 - 할인 금액' 으로 계산한다.
    - [x] 형태는 '{금액}원' 으로 한다.
    - [x] 금액에는 1000원 단위로 콤마를 표현한다.
- [x] 12월 이벤트 배지를 출력한다.
    - [x] 총혜택 금액에 따라 이벤트 배지의 이름을 다르게 출력한다.
        - 5천 원 이상: 별
        - 1만 원 이상: 트리
        - 2만 원 이상: 산타
    - [x] 이벤트 배지가 부여되지 않는 경우, "없음"을 출력한다.
    - [x] 새해 이벤트에 사용하는 값이니, 모델로 정의한다.

## 집중했던 것은

### 1. 비즈니스 로직과 UI 로직을 분리한다.
공통 리뷰를 읽으며 뼈 맞는 기분이었습니다. (^.ㅠ)
이전 코드의 문제점에 대해 너무나도 잘 알 수 있었고, 부족한 부분이 많이 보였습니다.
특히나, 비즈니스 로직과 UI 로직에 대한 구분을 깊게 생각하지 않았다는 것을 느꼈습니다.
이전에는 InputView, OutputView에서 입력값에 대한 모든 검증을 하였는데,
모델의 특징을 UI 로직을 담당하는 View가 맡게 되어 구분이 모호했었습니다.
따라서, 이번에는 모델 파라미터 값 검증 역할을 온전히 모델이 질 수 있도록 하였습니다.

### 2. 클래스 단일 책임의 원칙 (클래스는 단 한가지의 변경 이유만을 가져야 한다.)을 지킨다.

> 클래스의 덩치가 커진다는 것은 해당 객체의 책임도 많아 진다는 뜻입니다.<br>
[출처] 로버트 C.마틴 – Clean Code 177page

모델의 필드의 validation 체크는 각 모델 내에 검증 항수를 작성하였습니다.
이전 과제까지는 Validator 클래스를 만들어 사용했는데, 모든 모델의 검증 함수가 한 곳에 모이면 가독성이 떨어지며 각 모델의 일을 Validator 클래스가 대신 하는 것이므로 모델 내에서 검증할 수 있도록 하였습니다.


### 3. 중복 코드를 최소한으로 한다.
똑같은 코드가 여러 곳에 들어가는 것을 함수화하여 중복되는 코드를 최소화하였습니다.
특히, 오류 메시지 출력 시, 메시지 앞의 '[ERROR]'와 뒤의 '다시 입력해 주세요.'를 함수 로직으로 만들어 중복 코드를 최소화함으로써 
유지 보수가 더 편리한 방향으로 개발하기 위해 노력했습니다.

### 4. 실제로 출시할 서비스라 생각하고 개발에 임한다.
실제로 회사에서 업무를 보는 것이라 생각하고 개발에 임했습니다.
개발 후 유지보수를 하며, 또 이메일이 '1월 이벤트'를 언급한 것으로 미루어 보아
앞으로도 계속해서 진행될 이벤트라는 가정하에 개발하였습니다.
- 이벤트 해당 년, 월을 상수로 정의해 수정에 용이하도록 하였습니다.
- 메뉴가 추가, 삭제될 수 있으므로 메뉴와 메뉴 타입을 Enum 클래스로 정의하였습니다.
- 1,000원 미만의 메뉴가 추가될 가능성을 고려해, 총 주문 금액이 1000원보다 적은 경우 혜택 계산에서 발생할 오류를 대비하였습니다. `Math.min(plan.getTotalAmount(), discountAmount)`
- 새해 이벤트에 '뱃지'를 활용할 예정이므로, 뱃지를 enum 모델로 정의해 개발하였습니다.
- 예산이 여유롭다는 메일 내용을 반영해, 2억 이상의 금액의 메뉴가 추가되거나 혜택으로 주어질 수 있으므로 long으로 정의하였습니다.

### 5. 가독성 높은 코드를 작성한다.
술술 읽히는 코드를 작성하는 것에 대충하는 순간이 없도록 했습니다.
조금은 시간이 걸리더라도 다른사람이 봤을 때 잘 읽히는 코드일지 고민하며 작성하였습니다.
- 숫자에 언더바를 표현하여 끊어읽을 수 있도록 했습니다. (예. 1_000, 23_000)
- 한 줄로 작성할 수 있더라도, 매개변수로 들어가는 구문이 너무 길다면 따로 변수로 정의하였습니다.
```java
// 수정전
System.out.println(Utils.getFormattedKorMoney(plan.getTotalAmount()));

// 수정후
long totalAmount = plan.getTotalAmount();
System.out.println(Utils.getFormattedKorMoney(totalAmount));
```

### 6. 혜택을 예쁘게 클래스에 담고자 했다.
가장 크게 고민했던 부분은 혜택입니다. 같은 성질을 가지고 있어 하나의 클래스로 정의하려고 하였지만, 
각 혜택마다 다른 조건을 가지고 있으혀 혜택 금액 계산 방식이 모두 달라 고민되었습니다.
하나의 클래스로 정의한다면 각 혜택이 사용하지 않는 변수와 함수가 존재해 가독성이 떨어지고 비효율적인 코드가 되었습니다.
많은 고민과 학습을 한 끝에, 추상 클래스를 활용해 해당 내용을 풀어냈습니다.
- 추상 클래스 Benefit에 혜택의 공통적인 내용을 정의하였습니다.
  - 혜택이 적용되는지에 대한 검증 함수
  - 혜택 금액 계산 함수
- Benefit 클래스를 상속받아 5가지 혜택에 대한 클래스를 정의하였습니다.

### 7. 여전히 헷갈리면서도 조금은 알겠는, 각 모델이 역할을 가져야 하는 범위는 어디까지일까?를 생각했다.
4주동안 프로젝트를 개발하며 제대로 된 '객체'의 개념에 대해 고민할 수 있는 계기가 되었습니다.
이전에는 말그대로 삐그덕대도 굴러만 가면 되는 코드를 작성했는데, 저에게 너무 소중한 학습 시작점이 되었습니다.
아직 헷갈리는 모델이 져야 하는 역할 범위에 대해 고민하며, 모델의 입장에서 생각해보았습니다.
최대한 모델의 값을 getter, setter를 통해 전달하지 않도록 노력했고, 모델에 대한 로직은 모델 내에서 스스로 해낼 수 있도록 하였습니다.
- Plan 모델에서 총 혜택 금액을 계산해 바로 '뱃지'를 선정할 수 있지만, 뱃지를 선정하는 기준과 선정 역할은 뱃지 모델이 가지고 있다 생각해 Badge 모델에 선정 역할을 부여했습니다.
- Menu 모델에 isMain(), isDessert(), isDrink() 함수를 정의했습니다. 
Menu의 type 파라미터를 public으로 만들고 다른 모델로 넘긴다면 함수를 3개나 만들지 않아도 되었지만, 
이 또한 Menu에서 해결해야 하는 역할이라 판단하여 Menu 클래스에 함수를 정의하였습니다.
추가로, isMenuType(MenuType type)이라는 함수로 3개의 함수를 대체하여 작성할까 하였지만,
조금이라도 모델에 대한 정보를 밖으로 보내지 않기 위해 세 개의 함수로 정의하였습니다.
